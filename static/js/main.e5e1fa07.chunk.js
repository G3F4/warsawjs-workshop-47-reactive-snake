(this["webpackJsonpwarsawjs-workshop-47-reactive-snake"]=this["webpackJsonpwarsawjs-workshop-47-reactive-snake"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),u=n.n(c),o=(n(13),n(1)),s=Object(a.createContext)({gridSize:0,speed:0,paused:!0,pauseGame:function(){},unpauseGame:function(){},increaseSpeed:function(){}});n(14);function i(e){var t=e.gridSize,n=e.fruit,c=e.snake,u=Object(a.useMemo)((function(){return Array.from({length:t}).map((function(e,t){return t}))}),[t]);function o(e,t){return c.some((function(n){return n.x===e&&n.y===t}))?"snakeCell":e===n.x&&t===n.y?"fruitCell":"gridCell"}return r.a.createElement("div",{className:"grid"},u.map((function(e){return r.a.createElement("div",{className:"gridRow",key:e},u.map((function(t){return r.a.createElement("div",{className:o(e,t),key:"".concat(e,"x").concat(t)})})))})))}var l=n(5),d=n(2);function f(e){return Math.floor(Math.random()*e)}function m(){var e,t=Object(a.useContext)(s),n=t.gridSize,r=t.speed,c=t.paused,u=t.increaseSpeed,i=t.pauseGame,m=Object(a.useState)([{x:n/2,y:n/2},{x:n/2,y:n/2+1},{x:n/2,y:n/2+2}]),p=Object(o.a)(m,2),v=p[0],y=p[1],b=Object(a.useState)({x:f(n),y:f(n)}),k=Object(o.a)(b,2),w=k[0],j=k[1],O=function(e){var t=Object(a.useRef)(e);function n(e){"ArrowUp"===e.key?t.current="up":"ArrowDown"===e.key?t.current="down":"ArrowLeft"===e.key?t.current="left":"ArrowRight"===e.key&&(t.current="right")}return Object(a.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[]),t.current}("up");return e=i,Object(a.useEffect)((function(){function t(t){32===t.keyCode&&e()}return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),function(e){var t=e.onTick,n=e.speed;Object(a.useEffect)((function(){var e=setInterval(t,n);return function(){clearInterval(e)}}),[n,t])}({speed:r,onTick:function(){if(!c){var e=Object(o.a)(v,1)[0],t=Object(d.a)({},e),a=w.x===t.x&&w.y===t.y;a&&(j({x:f(n),y:f(n)}),u()),"up"===O?t.x-=1:"down"===O?t.x+=1:"right"===O?t.y+=1:"left"===O&&(t.y-=1);var r=[t].concat(a?Object(l.a)(v.slice(0,v.length)):Object(l.a)(v.slice(0,v.length-1)));y(r)}}}),Object(a.useLayoutEffect)((function(){document.querySelector(".fruitCell").style="transition: transform 0.5s;transform: rotate3d(1, 1, 1, 360deg);"}),[w]),{fruit:w,snake:v}}n(15);function p(){var e=Object(a.useContext)(s).unpauseGame;return r.a.createElement("div",{className:"gameMenu"},r.a.createElement("div",{className:"gameMenuOverlay"}),r.a.createElement("div",{className:"gameMenuContent"},r.a.createElement("button",{onClick:e},"PLAY")))}function v(){var e=Object(a.useContext)(s),t=e.gridSize,n=e.paused,c=m(),u=c.fruit,o=c.snake;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(p,null),r.a.createElement(i,{gridSize:t,fruit:u,snake:o}))}var y={speed:500,paused:!0};function b(){return y}function k(e,t){var n=t.type,a=t.payload;switch(n){case"increaseSpeed":return Object(d.a)({},e,{speed:e.speed*a});case"pauseGame":return Object(d.a)({},e,{paused:!0});case"unpauseGame":return Object(d.a)({},e,{paused:!1});default:throw new Error("unknown game state reducer action type: ".concat(n))}}var w=function(){var e=Object(a.useReducer)(k,y,b),t=Object(o.a)(e,2),n=t[0],c=t[1],u=n.paused,i=n.speed,l=Object(a.useCallback)((function(){c({type:"increaseSpeed",payload:.8})}),[]),d=Object(a.useCallback)((function(){c({type:"pauseGame"})}),[]),f=Object(a.useCallback)((function(){c({type:"unpauseGame"})}),[]);return r.a.createElement(s.Provider,{value:{speed:i,gridSize:10,paused:u,increaseSpeed:l,pauseGame:d,unpauseGame:f}},r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.e5e1fa07.chunk.js.map